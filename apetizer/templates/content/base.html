{% extends 'content/search.html' %}
{% load static content_tags content_ui_tags thumbnail momentjs moderate_tags markdown_deux_tags %}

{% block page_article %}
    <div id="masthead" class="ui vertical segment">
        <div class="ui stackable padded grid">
        {% block page_head %}
        
            <div class="ui ten wide column">
                <a class="icon item" href="index/" ><i class="icon arrow up"></i></a>{% content_breadcrumb currentNode %}
                <h1 class="ui header">{{ currentNode.title }}</h1>
               
                <div class="ui secondary pointing top menu">
                    {% if action != 'view' or currentNode.published == False %}
                    <a class="icon item right" href="view/" ><i class="icon eye"></i></a>
                    <a class="icon item" href="translate/" ><i class="icon edit"></i></a>
                    <a class="icon item" href="code/" ><i class="icon code"></i></a>
                    {% comment %}

                    <a class="icon item right" href="timing/" ><i class="icon clock"></i></a>
                    <a class="icon item" href="location/" ><i class="icon map"></i></a>
                    <a class="icon item" href="image/" ><i class="icon picture"></i></a>
                    <a class="icon item" href="related/" ><i class="icon lab"></i></a>
                    {% endcomment %}
                    {% else %}
                    <a class="ui button icon item right" href="translate/" ><i class="icon edit"></i></a>
                    {% endif %}
                </div>
                
                {% block body %}
                <div class="ui item" >
                    {% if not currentNode.description %}
                        <a class="ui small label" href="translate/" >Completer la description ...</a>
                    {% else %}
                        <div class="ui header">{{ currentNode.description|markdown }}</div>
                    {% endif %}
                </div>
                {% endblock %}
                
            </div>
            <div class="ui center aligned six wide column">
                
                <a class="ui medium image" href="{{ currentNode.get_url }}image/" >
                {% if currentNode.image %}
                    <img src="{{ currentNode.image.url }}" />
                {% else %}
                    <img src="{% static 'components/semantic/dist/assets/images/image-16by9.png' %}" />
                {% endif %}
                </a>
                <div class="ui secondary pointing top menu">
                    {% if action != 'view' or currentNode.published == False %}
                    <a class="icon item" href="publish/" ><i class="icon book"></i></a>
                    <a class="icon item right" href="timing/" ><i class="icon clock"></i></a>
                    <a class="icon item" href="location/" ><i class="icon map"></i></a>
                    <a class="icon item" href="image/" ><i class="icon picture"></i></a>
                    <a class="icon item" href="related/" ><i class="icon lab"></i></a>
                    {% else %}
                    <a class="ui button icon item right" href="translate/" ><i class="icon edit"></i></a>
                    {% endif %}
                </div>
                
                {% block ui-form %}
                {% endblock %}

                <div class="ui items" >
                    {% if currentNode.related_url %}
                    <div class="ui tiny item">
                        <a href="{{ currentNode.related_url }}"  target="_blank" >{{ currentNode.related_url|truncatechars:"128" }}</a>
                    </div>
                    {% else %}
                    {% endif %}
                    {% for node in paginator.object_list %}
                        {% if node.behavior == 'file' %}
                        <div class="ui mini spaced image" >
                            <img src="{% thumbnail ufile.file 64x64 %}" />
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
                
                
                <div class="row">
                    <div class="ui buttons" >
                        <a class="ui tiny label" href="follow/" ><i class="icon comment"></i> Suivre</a>
                        <a class="ui tiny label" href="review/" ><i class="icon like"></i>Valider</a>
                        <a class="ui tiny label" href="reject/" ><i class="icon dont like"></i>Rejeter</a>
                    </div>
                </div>
                
                <div class="ui top right attached label"><a href="{{ currentNode.get_url }}consult/" >History</a></div>
            </div>
        {% endblock page_head %}
        </div>
        <div class="ui sixteen wide column" style="opacity:0.7">
            <div class="ui secondary pointing bottom menu full width">
                <a class="icon item" href="read/" ><i class="icon book"></i></a>
                <a class="icon item" href="timeline/" ><i class="icon calendar"></i></a>
                <a class="icon item" href="map/" ><i class="icon globe"></i></a>
                {% comment %}<a class="icon item" href="{{ currentNode.get_uid_url }}directory/" ><i class="icon sitemap"></i></a>{% endcomment %}
        {% if not currentNode.published or action != 'view' %}
                <a class="icon item right" href="pull/" ><i class="icon arrow up"></i></a>
                <a class="icon item" href="push/" ><i class="icon arrow down"></i></a>
        {% else %}
        {% endif %}
                
                <a class="icon item right" href="edit/" ><i class="icon list layout"></i></a>
                <a class="icon item" href="describe/" ><i class="icon list"></i></a>
                <a class="icon item" href="program/" ><i class="icon grid layout"></i></a>
            </div>
        </div>
        
    </div>

    <div class="ui main stackable internally divided padded grid">      
        {% block page_container %}
        {% block content %}
            {{ block.super }}
        {% endblock %}
        {% endblock page_container %}
    </div>
{% endblock page_article %}
